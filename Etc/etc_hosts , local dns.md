`/etc/hosts` 파일은 인터넷 도메인 이름 시스템(DNS)이 IP 주소를 해석하는 방식에 중추적인 역할을 함

## /etc/hosts 파일이란?

`/etc/hosts` 파일은 시스템이 도메인 이름을 IP 주소로 변환하는 과정에서 맨 처음 참조하는 파일임

이는 DNS 조회의 가장 초기 단계를 담당하며, 파일에 저장된 정보에 따라 시스템은 도메인 이름에 대응하는 IP 주소를 즉시 알 수 있음.

## DNS와 /etc/hosts 파일

사용자가 웹 브라우저에 도메인 이름을 입력하면, DNS 서버는 이를 해당하는 IP 주소로 변환하여 해당 사이트의 내용을 브라우저에 반환함.

그러나 `/etc/hosts` 파일은 이 과정에서 DNS 서버에 접근하기 전에 먼저 참조되는 곳. 

즉, 도메인 이름에 대한 IP 주소가 `/etc/hosts` 파일에 명시되어 있다면, 시스템은 이 파일의 정보를 우선적으로 사용하고, 외부 DNS 서버에 요청을 보내는 것을 건너뛰게 됨. 

즉 `/etc/hosts` 파일은 기본적으로 로컬 DNS 서버의 역할을 하며, 이는 네트워크 지연을 줄이고, 개발 환경에서 특정 호스트 이름에 대한 IP 주소를 제어하거나, 웹 사이트 접근을 차단하는 등의 유용한 기능을 제공할 수 있음.

## OS 별 경로

**Mac OS** : `/private/etc/hosts`

**Linux** : `/etc/hosts`

**Window** : `C:/Windows/System32/drivers/etc/hosts`

## /etc/hosts 파일 활용하기

로컬 개발 환경에서 `/etc/hosts` 파일을 활용하면, 특정 도메인 이름을 로컬 IP 주소인 127.0.0.1(루프백 주소)에 매핑할 수 있음.

이렇게 하면 도메인 이름을 사용하여 로컬에서 실행되는 서버에 접근할 수 있게 됨. 

또한, IPv6 환경에서는 `::1`을 사용하여 동일한 작업을 수행할 수 있음.

아래는 `/etc/hosts` 파일의 예시

```shell
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1       localhost mylocaldevsite.local
255.255.255.255 broadcasthost
::1             localhost

```


위 예시에서, `mylocaldevsite.local` 도메인 이름이 로컬 IP 주소에 매핑되어 있음. 

이제 `mylocaldevsite.local`로 브라우저에서 접근하면, 시스템은 이를 127.0.0.1로 해석하고 로컬 서버에 연결함.

## 그렇다면 DNS 서버를 왜 써?

역시나 당연히 이런 방식은 몇 가지 단점과 취약점이 존재함.

1. `관리 부담`
   `/etc/hosts` 파일은 수동으로 관리해야 함.
    따라서 많은 수의 도메인을 관리해야 하거나 도메인과 IP 주소가 자주 변경되는 경우, 이 파일을 유지하는 것이 어려울 수 있음.
    
2. `일관성 문제`
   모든 시스템에 대해 일관된 호스트 이름을 유지하려면 각 시스템의 `/etc/hosts` 파일을 일치하게 유지해야 함. 
   이는 특히 대규모 네트워크에서 관리 부담을 늘릴 수 있음.
    
3. `캐시 문제`
   `/etc/hosts` 파일에 있는 내용은 캐싱되지 않음.
    즉, 시스템이 도메인 이름을 찾을 때마다 이 파일을 항상 조회해야 함.
     많은 수의 호스트 이름을 이 파일에 저장하면 시스템 성능에 영향을 줄 수 있음.
    
4. `보안 취약점`
    `/etc/hosts` 파일이 불필요하게 넓은 권한으로 열리거나, 악의적인 소프트웨어에 의해 변경될 경우, 사용자의 인터넷 트래픽을 가로채거나 리디렉션하는 데 사용될 수 있음.
     이는 `DNS 스푸핑`이라는 공격 유형의 일종으로, 사용자가 원하지 않는 웹사이트로 리디렉션되거나, 악의적인 웹사이트로 이동하는 등의 결과를 초래할 수 있음.